import os

import git
from telethon.utils import get_display_name

from .. import loader, main, utils


@loader.tds
class PremiumInfoMod(loader.Module):
    """Premium emoji info by amore <3"""

    strings = {"name": "PremiumInfo"}

    def __init__(self):
        self.config = loader.ModuleConfig(
            # ... (الإعدادات الأخرى هنا)

            loader.ConfigValue(
                "Media",
                "https://telegra.ph/file/ffebbad4c85c523ea5ec2.jpg",
                lambda: "Your custom media",
            ),
        )

    async def client_ready(self):
        if not (await self._client.get_me()).premium:
            raise loader.LoadError(
                "⭐️ This module is available only to Telegram Premium subscribers"
            )
        self._me = await self._client.get_me()

    async def pinfocmd(self, message):
        """Custom emoji info"""

        reply = await message.get_reply_message()

        media = self.config["Media"]
        # ... (الإعدادات الأخرى هنا)

        # احتفظ بصورة الحساب هنا
        user_photo = await self._client.download_profile_photo(self._me.id, file="user_photo.jpg")

        me = (
            "<b><a"
            f' href="tg://user?id={self._me.id}">{utils.escape_html(get_display_name(self._me))}</a></b>'
        )
        # ... (بقية الكود هنا)

        hikka = (
            "<b><emoji document_id=5213123182378098899>💨</emoji> Premium info</b>\n"
            f"<b>{owner} Owner: {me}</b>\n\n"
            f"<b>{vrs} Version: </b>{version} {build}\n"
            f"<b>{upd}</b>\n"
            f"<b>{upt} Uptime: {uptime}</b>\n\n"
            f"<b>{pref} Prefix: </b>{prefix}\n\n"
            f"{platform}\n"
        )

        # أرسل الصورة والمعلومات
        await message.delete()
        await self._client.send_file(
            message.peer_id,
            user_photo,  # ارسل الصورة هنا
            caption=hikka,
            link_preview=False,
            reply_to=reply.id if reply else None,
        )
